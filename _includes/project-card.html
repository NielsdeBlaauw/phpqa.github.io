<div class="project card mb-4">
    <div class="card-header card-metrics">
        {% if project.packagist.first != nil and project.github.first != nil %}
        {% capture github-url %}{% if project.github.first.url != nil %}{{ project.github.first.url }}{% else %}{{ site.metadata.github.url-prefix }}{{ project.github.first.name }}{% endif %}{% endcapture %}
        {% capture github-name %}{% if project.github.first.name != nil %}{{ project.github.first.name }}{% else %}{{ project.github.first.url | replace: site.metadata.github.url-prefix, '' }}{% endif %}{% endcapture %}
        {% capture packagist-name %}{% if project.packagist.first.name != nil %}{{ project.packagist.first.name }}{% else %}{{ project.packagist.first.url | replace: site.metadata.packagist.url-prefix, '' }}{% endif %}{% endcapture %}
        <a href="{{ github-url }}" title="watchers" class="text-dark">
            <i class="far fa-eye fa-fw"></i>
            <span data-github-name="{{ github-name }}" data-packagist-name="{{ packagist-name }}" data-metric="watchers">0</span>
        </a>
        <a href="{{ github-url }}" title="stars" class="text-dark">
            <i class="far fa-star fa-fw"></i>
            <span data-github-name="{{ github-name }}" data-packagist-name="{{ packagist-name }}" data-metric="stargazers">0</span>
        </a>
        <a href="{{ github-url }}" title="forks" class="text-dark">
            <i class="fas fa-code-branch fa-fw"></i>
            <span data-github-name="{{ github-name }}" data-packagist-name="{{ packagist-name }}" data-metric="forks">0</span>
        </a>
        {% endif %}
        {% if page.comments-count == true and project.comments != false %}
        <a href="{{ project.url | absolute_url }}" title="comments" class="text-dark">
            <i class="far fa-comments fa-fw" aria-hidden="true"></i>
            <span data-disqus-identifier="{{ project.id }}" class="disqus-comment-count">0</span>
        </a>
        {% endif %}
    </div>
    <div class="card-body">

        <div class="card-actions">
            {% for metadataItem in site.metadata %}
            {% assign projectKey = metadataItem[0] %}
            {% assign metadataProperties = metadataItem[1] %}
            {% if metadataProperties.button %}
            {% assign valueObjects = project[projectKey] %}
            {% for valueObject in valueObjects %}
            {% if valueObject != '' and valueObject != nil and (projectKey != 'website' or project.website != project.source) %}
            {% capture url %}{% if valueObject.url != nil %}{{ valueObject.url }}{% elsif valueObject.name != nil %}{{ metadataProperties.url-prefix }}{{ valueObject.name }}{% endif %}{% endcapture %}
            {% if url != '' and url != nil %}
            <a href="{{ url }}" target="_blank" title="{{ metadataProperties.label }}"
               data-toggle="tooltip" data-placement="left" data-animation="false"
               class="btn btn-outline-secondary {{ metadataProperties.button-class }} btn-sm mb-1 animated-parent">
                <i class="{{ metadataProperties.icon }} fa-fw animated-icon"></i>
            </a>
            {% endif %}
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
        </div>

        {{ project.excerpt }}

        {% if project.authors != nil or project.companies != nil %}
        <p class="small">
            by {{ project.authors | map: 'name' | join: ', ' }}{% if project.authors != nil and project.companies !=nil %}, {% endif %}{{ project.companies | map: 'name' | join: ', ' }}
        </p>
        {% endif %}

        <a href="{{ project.url | absolute_url }}" class="more-information float-right">
            More information &rarr;
        </a>

    </div>
    <div class="card-footer card-tags text-muted">
        {% if project.tags contains 'alpha' %}
        <a class="text-dark" href="#alpha" data-tag-filter="alpha"><i class="fas fa-vial"></i> alpha</a>,
        {% endif %}
        {% if project.tags contains 'unmaintained' %}
        <a class="text-dark" href="#unmaintained" data-tag-filter="unmaintained"><i class="far fa-eye-slash"></i> unmaintained</a>,
        {% endif %}
        {% if project.tags contains 'deprecated' %}
        <a class="text-dark" href="#deprecated" data-tag-filter="deprecated"><i class="fas fa-unlink"></i> deprecated</a>,
        {% endif %}
        {% if project.dockerhub != '' and project.dockerhub != nil %}
        <a class="text-dark" href="#docker image" data-tag-filter="docker image"><i class="fab fa-docker"></i> docker image</a>,
        {% endif %}
        {% assign tags = project.tags | where_exp: 'tag', 'tag != ""' | where_exp: 'tag', 'tag != "deprecated"' | where_exp: 'tag', 'tag != "unmaintained"' | where_exp: 'tag', 'tag != "alpha"' | sort | uniq %}
        {% for tag in tags %}
        <a class="text-dark" href="#{{ tag }}" data-tag-filter="{{ tag }}">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
    </div>
</div>
